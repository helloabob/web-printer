package  {	import flash.display.Sprite;	import com.google.zxing.common.ByteMatrix;	import com.google.zxing.MultiFormatWriter;	import flash.display.BitmapData;	import flash.display.Bitmap;	import com.google.zxing.BarcodeFormat;	import flash.external.ExternalInterface;	import barcode.BarcodeUtil;		public class MyPrint extends Sprite{		public function MyPrint() {			// constructor code		}		public function gender(obj:Object):void{			/*for(var node:* in obj){				flash.external.ExternalInterface.call("alert",node+":"+obj[node]);			}*/						this.graphics.beginFill(0x000000,0);			this.graphics.drawRect(0,0,int(obj.barx)+int(obj.barw),int(obj.barh)+int(obj.bary));			this.graphics.endFill();						var ver:String=obj.ver;			if(ver&&ver!="")ver="|"+ver;			else ver="";						var dt:Date=obj.dt;			this.con.x=int(obj.barx);			this.con.y=int(obj.bary);			this.con.width=int(obj.barw);			this.con.height=int(obj.barh);			this.con.txtVend.text=obj.vend;			this.con.txtOrder.text=obj.order;			this.con.txtVendDesc.text=obj.venddesc;			this.con.txtPart.text=obj.part;			this.con.txtPartDesc.text=obj.partdesc;			this.con.txtLot.text=obj.lot+ver;			this.con.txtQty.text=obj.qty;			this.con.txtVendLot.text=obj.vendlot;			this.con.txtLoc.text=obj.loc;			this.con.txtVer.text=obj.ver;			this.con.txtDraw.text=obj.drawsize;			//this.txtBar.text=obj.bar;			this.con.txtPrintDate.text="打印日期:"+getDateString(dt,1);						var pre:String=obj.pre;						var single:String=obj.single;						var bar:String=getDateString(dt,0)+dt.time.toString().substr(4)+pre;			this.con.txtBar.text=bar+obj.vend;						var str:String;			str=bar+"@&*"+obj.part+"@&*"+obj.qty+"@&*"+obj.lot+ver+"@&*"+"@&*"+obj.order+"@&*"+obj.vend+"@&*"+obj.vendlot;			if(single=="true"){			}else{				var total:String=obj.total;				var pack:String=obj.pack;				str=str+"@&*"+total+"@&*"+pack;			}						create128(this.con.txtBar.text);			createQR(str);					}		private function getDateString(date:Date,tp:int):String		{			var dYear:String = String(date.fullYear).substr(2);			var dMouth:String = String((date.getMonth() + 1 < 10) ? "0" : "") + (date.getMonth() + 1);			var dDate:String = String((date.date < 10) ? "0" : "") + date.date;			var ret:String = "";			if(tp==1)ret += dYear + "/" + dMouth + "/" + dDate;			else if(tp==0)ret += dYear + dMouth + dDate;			return ret;		}		private function createQR(str:String):void{						var bmpd:BitmapData = barcode.BarcodeUtil.Generate(BarcodeUtil.TYPE_QR_CODE, str, 150,150);			var qrImg:Bitmap = new Bitmap(bmpd);			qrImg.x=195;			qrImg.y=55;			con.addChild(qrImg);		}		private function create128(str:String):void{			var bmpd:BitmapData = barcode.BarcodeUtil.Generate(BarcodeUtil.TYPE_CODE_128, str, 375,35);			var qrImg:Bitmap = new Bitmap(bmpd);			qrImg.x=0;			qrImg.y=220;			con.addChild(qrImg);		}	}	}